[gd_scene load_steps=7 format=2]

[ext_resource path="res://Materials/grid_green.tres" type="Material" id=1]
[ext_resource path="res://Materials/grid_dark.tres" type="Material" id=2]
[ext_resource path="res://Scenes/Player.tscn" type="PackedScene" id=3]

[sub_resource type="GDScript" id=1]
script/source = "extends Spatial

var player_scn = preload(\"res://Scenes/Player.tscn\")

onready var player = $Player
#onready var cinema_cam = $Camera

func _ready() -> void:
	player.mode = player.MODE.CINEMATIC


func _on_animation_finished(anim_name: String) -> void:
	\"\"\"
	var player = player_scn.instance()
	add_child(player)
	player.translate_camera(cinema_cam.translation)
	#player.camera.current = true
	cinema_cam.queue_free()
	\"\"\"
	player.mode = player.MODE.GAME
"

[sub_resource type="Animation" id=3]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath("Player:translation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Vector3( 0, 3, 0 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("Player:rotation_degrees")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Vector3( 0, 0, 0 ) ]
}

[sub_resource type="Animation" id=2]
resource_name = "test"
length = 6.0
tracks/0/type = "value"
tracks/0/path = NodePath("Player:translation")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 2, 3.5, 5, 6 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1 ),
"update": 0,
"values": [ Vector3( -14, 7.752, -16 ), Vector3( -14, 7.752, -7 ), Vector3( -14, 7.752, 0 ), Vector3( -7, 5.376, 7 ), Vector3( 0, 3, 0 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("Player:rotation_degrees")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 1.5, 2, 3.5, 6 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1 ),
"update": 0,
"values": [ Vector3( 0, -180, 0 ), Vector3( 0, -180, 0 ), Vector3( 0, -180, -16.361 ), Vector3( -2.43701e-06, -180, 16.361 ), Vector3( 0, 0, 0 ) ]
}

[node name="Cinematic" type="Spatial"]
script = SubResource( 1 )

[node name="CSGCombiner" type="CSGCombiner" parent="."]
use_collision = true

[node name="CSGBox" type="CSGBox" parent="CSGCombiner"]
transform = Transform( 3.9, 0, 0, 0, 1, 0, 0, 0, 3.9, 0, 0.489617, 0 )
width = 52.0
height = 0.438884
depth = 44.0
material = ExtResource( 2 )

[node name="CSGBox2" type="CSGBox" parent="CSGCombiner"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 3.57515, -23 )
width = 4.0
height = 4.0
depth = 4.0
material = ExtResource( 1 )

[node name="CSGBox3" type="CSGBox" parent="CSGCombiner"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 3.57515, -18 )
width = 4.0
height = 4.0
depth = 4.0
material = ExtResource( 1 )

[node name="CSGBox4" type="CSGBox" parent="CSGCombiner"]
transform = Transform( 0.578342, 0, -0.815795, 0, 1, 0, 0.815795, 0, 0.578342, -28.2613, 3.57515, -0.328657 )
width = 4.0
height = 4.0
depth = 4.0
material = ExtResource( 1 )

[node name="CSGBox5" type="CSGBox" parent="CSGCombiner"]
transform = Transform( 0.578342, 0, -0.815795, 0, 1, 0, 0.815795, 0, 0.578342, -24.8219, 3.57515, 13.1684 )
width = 4.0
height = 4.0
depth = 4.0
material = ExtResource( 1 )

[node name="CSGBox6" type="CSGBox" parent="CSGCombiner"]
transform = Transform( -0.234056, 0, -0.972223, 0, 1, 0, 0.972223, 0, -0.234056, 14.6507, 3.53011, 16.4215 )
width = 4.0
height = 4.0
depth = 4.0
material = ExtResource( 1 )

[node name="CSGBox7" type="CSGBox" parent="CSGCombiner"]
transform = Transform( -0.234056, 0, -0.972223, 0, 1, 0, 0.972223, 0, -0.234056, 6.74684, 3.53011, 27.8902 )
width = 4.0
height = 4.0
depth = 4.0
material = ExtResource( 1 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
autoplay = "test"
anims/RESET = SubResource( 3 )
anims/test = SubResource( 2 )

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( 0.524863, 0.578887, -0.624026, 0, 0.733125, 0.680094, 0.851187, -0.356956, 0.38479, 0, 12.7955, 0 )
layers = 3
shadow_enabled = true

[node name="Player" parent="." instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 0 )
start_mode = 1

[connection signal="animation_finished" from="AnimationPlayer" to="." method="_on_animation_finished"]
