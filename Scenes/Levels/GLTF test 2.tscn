[gd_scene load_steps=11 format=2]

[ext_resource path="res://Scenes/Player.tscn" type="PackedScene" id=1]
[ext_resource path="res://Assets/Models/level 4/level 4.tscn" type="PackedScene" id=2]
[ext_resource path="res://Scenes/Elements/KillZone.tscn" type="PackedScene" id=3]
[ext_resource path="res://Assets/Models/level 4/first floor.tscn" type="PackedScene" id=4]
[ext_resource path="res://Scenes/Elements/LookTrigger.tscn" type="PackedScene" id=5]
[ext_resource path="res://Scenes/Elements/InvisiWall.tscn" type="PackedScene" id=6]

[sub_resource type="ProceduralSky" id=8]

[sub_resource type="Environment" id=9]
background_mode = 3
background_sky = SubResource( 8 )
background_color = Color( 0.172549, 0.172549, 0.172549, 1 )
tonemap_mode = 4
ss_reflections_fade_in = 0.204906
ssao_intensity = 68.37

[sub_resource type="GIProbeData" id=10]
bounds = AABB( -24, -11, -24, 48, 22, 48 )
cell_size = 0.375
to_cell_xform = Transform( 2.66667, 0, 0, 0, 2.66667, 0, 0, 0, 2.66667, 64, 29.3333, 64 )
dynamic_data = PoolIntArray( 0, 8, 128, 64, 128, 1, 0, 32728, 1374225456, 0, 1690215608, 0, 1374225440, 0, 48, 4096, -1, -1, -1, -1, -1, -1, -1, -1, 0, 0, 8355711, 0 )
dynamic_range = 4
energy = 0.06
bias = 1.5
normal_bias = 0.0
propagation = 0.7

[sub_resource type="GDScript" id=11]
script/source = "extends OmniLight


func _ready() -> void:
	visible = false
	



func _on_LookTriger_target_entered(id) -> void:
	visible = true
"

[node name="Spatial" type="Spatial"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 9 )

[node name="Player" parent="." instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.80739, 0 )

[node name="GIProbe" type="GIProbe" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 10.0919, 0 )
layers = 3
extents = Vector3( 24, 11, 24 )
energy = 0.06
data = SubResource( 10 )

[node name="level 4" parent="." instance=ExtResource( 2 )]

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( 0.277759, -0.0555002, 0.959046, -0.940999, 0.185177, 0.283249, -0.193314, -0.981137, -0.000791041, 0, 0, 0 )
shadow_enabled = true

[node name="KillZone" parent="." instance=ExtResource( 3 )]
transform = Transform( 51.5778, 0, 0, 0, 1, 0, 0, 0, 51.5778, 0, -5.15908, 0 )

[node name="first floor" parent="." instance=ExtResource( 4 )]

[node name="LookTriger" parent="." instance=ExtResource( 5 )]
transform = Transform( 19.529, 0, 0, 0, 5.4598, 0, 0, 0, 4.10549, 0.802874, 15.1401, -17.414 )

[node name="OmniLight" type="OmniLight" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.685181, 14.7064, -17.791 )
layers = 3
light_color = Color( 1, 0, 0, 1 )
light_energy = 4.265
script = SubResource( 11 )

[node name="Wall" parent="." instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 5.46126, 0, 0, 0, 11.1599, -9.64851, 4.80055, 0 )
show = true

[connection signal="target_entered" from="LookTriger" to="OmniLight" method="_on_LookTriger_target_entered"]
