[gd_scene load_steps=10 format=2]

[ext_resource path="res://Materials/Grids/grid_green.tres" type="Material" id=1]
[ext_resource path="res://Materials/Grids/grid_dark.tres" type="Material" id=2]
[ext_resource path="res://Scenes/Player.tscn" type="PackedScene" id=3]
[ext_resource path="res://Scenes/Elements/KillZone.tscn" type="PackedScene" id=4]
[ext_resource path="res://Scenes/Elements/TriggerZone.tscn" type="PackedScene" id=5]

[sub_resource type="GDScript" id=1]
script/source = "extends Spatial

var player_scn = preload(\"res://Scenes/Player.tscn\")

onready var player = $Player
onready var anim_player = $AnimationPlayer
#onready var cinema_cam = $Camera

func _ready() -> void:
	pass
	#player.mode = player.MODE.CINEMATIC


func _on_animation_finished(anim_name: String) -> void:
	pass #player.mode = player.MODE.GAME


func _on_Trigger_player_entered(id) -> void:
	print(\"player entered\")
	anim_player.play(\"trigger test\")


func _on_Trigger_player_exited(id) -> void:
	print(\"player exited\")
"

[sub_resource type="Curve3D" id=2]
_data = {
"points": PoolVector3Array( 0, 0, 0, 0, 0, 0, 0.314999, 0, -35.3959, -7.10857, 0, 6.00053, 7.10857, 0, -6.00053, 0.660236, 0, -60.7711, -5.50248, 0, -0.661049, 5.50248, 0, 0.661049, 36.0475, 0, -65.9498, -4.62736, 0, -6.59806, 4.62736, 0, 6.59806, 66.7741, 0, -55.4199, 1.02172, 0, -5.61777, -1.02172, 0, 5.61777, 73.6789, 0, -17.9611, 3.1041, 0, -5.92244, -3.1041, 0, 5.92244, 66.4288, 0, 7.41414, 0, 0, 0, 0, 0, 0, 48.3036, 0, 28.1287, 0, 0, 0, 0, 0, 0, 19.3033, 0, 51.4325 ),
"tilts": PoolRealArray( 0, 0, 0, 0, 0, 0, 0, 0 )
}

[sub_resource type="Animation" id=4]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath("CSGCombiner/Path/PathFollow:unit_offset")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 0.0 ]
}

[sub_resource type="Animation" id=3]
resource_name = "trigger test"
length = 10.0
tracks/0/type = "value"
tracks/0/path = NodePath("CSGCombiner/Path/PathFollow:unit_offset")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 10 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 0.0, 1.0 ]
}

[node name="Cinematic" type="Spatial"]
script = SubResource( 1 )

[node name="CSGCombiner" type="CSGCombiner" parent="."]
use_collision = true

[node name="CSGBox" type="CSGBox" parent="CSGCombiner"]
transform = Transform( 3.9, 0, 0, 0, 1, 0, 0, 0, 3.9, 0, 0.489617, 0 )
width = 52.0
height = 0.438884
depth = 44.0
material = ExtResource( 2 )

[node name="CSGBox2" type="CSGBox" parent="CSGCombiner"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 3.57515, -23 )
width = 4.0
height = 4.0
depth = 4.0
material = ExtResource( 1 )

[node name="CSGBox3" type="CSGBox" parent="CSGCombiner"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 3.57515, -32.4517 )
width = 4.0
height = 4.0
depth = 4.0
material = ExtResource( 1 )

[node name="CSGBox4" type="CSGBox" parent="CSGCombiner"]
transform = Transform( 0.578342, 0, -0.815795, 0, 1, 0, 0.815795, 0, 0.578342, -28.2613, 3.57515, -0.328657 )
width = 4.0
height = 4.0
depth = 4.0
material = ExtResource( 1 )

[node name="CSGBox5" type="CSGBox" parent="CSGCombiner"]
transform = Transform( 0.578342, 0, -0.815795, 0, 1, 0, 0.815795, 0, 0.578342, -24.8219, 3.57515, 13.1684 )
width = 4.0
height = 4.0
depth = 4.0
material = ExtResource( 1 )

[node name="CSGBox6" type="CSGBox" parent="CSGCombiner"]
transform = Transform( -0.234056, 0, -0.972223, 0, 1, 0, 0.972223, 0, -0.234056, 14.6507, 3.53011, 16.4215 )
width = 4.0
height = 4.0
depth = 4.0
material = ExtResource( 1 )

[node name="CSGBox7" type="CSGBox" parent="CSGCombiner"]
transform = Transform( -0.234056, 0, -0.972223, 0, 1, 0, 0.972223, 0, -0.234056, 6.74684, 3.53011, 27.8902 )
width = 4.0
height = 4.0
depth = 4.0
material = ExtResource( 1 )

[node name="Path" type="Path" parent="CSGCombiner"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 51.8698, 0, 5.82669 )
curve = SubResource( 2 )

[node name="PathFollow" type="PathFollow" parent="CSGCombiner/Path"]
transform = Transform( -0.946896, 0, -0.321538, 0, 1, 0, 0.321538, 0, -0.946896, 0.314999, 0, -35.3959 )
rotation_mode = 4
loop = false

[node name="CSGBox8" type="CSGBox" parent="CSGCombiner/Path/PathFollow"]
width = 3.86289
height = 2.38676
depth = 12.8532
material = ExtResource( 1 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
anims/RESET = SubResource( 4 )
"anims/trigger test" = SubResource( 3 )

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( 0.524863, 0.578887, -0.624026, 0, 0.733125, 0.680094, 0.851187, -0.356956, 0.38479, 0, 12.7955, 0 )
layers = 3
shadow_enabled = true

[node name="Player" parent="." instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 0 )

[node name="Camera" type="Camera" parent="."]
transform = Transform( -4.37114e-08, 0.274748, -0.961516, 0, 0.961516, 0.274748, 1, 1.20096e-08, -4.20292e-08, -44.951, 14.569, 0 )
fov = 34.6

[node name="KillZone" parent="." instance=ExtResource( 4 )]
transform = Transform( 213.8, 0, 0, 0, 1, 0, 0, 0, 213.8, 0, -15, 0 )
show = true

[node name="Trigger" parent="." instance=ExtResource( 5 )]
transform = Transform( -1.64239e-07, 0, 3.19097, 0, 6.48877, 0, -14.0757, 0, -5.22523e-07, 27.0511, 4.11285, -26.1172 )
show = true

[connection signal="animation_finished" from="AnimationPlayer" to="." method="_on_animation_finished"]
[connection signal="player_entered" from="Trigger" to="." method="_on_Trigger_player_entered"]
[connection signal="player_exited" from="Trigger" to="." method="_on_Trigger_player_exited"]
