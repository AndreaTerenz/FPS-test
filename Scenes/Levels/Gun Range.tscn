[gd_scene load_steps=13 format=2]

[ext_resource path="res://Scripts/Hitbox.gd" type="Script" id=1]
[ext_resource path="res://Materials/Grids/grid_dark.tres" type="Material" id=2]
[ext_resource path="res://Materials/Grids/grid_red.tres" type="Material" id=3]
[ext_resource path="res://Scenes/Player.tscn" type="PackedScene" id=4]
[ext_resource path="res://Envs/environment.tres" type="Environment" id=5]
[ext_resource path="res://Scenes/Weapons/AmmoPickup.tscn" type="PackedScene" id=6]

[sub_resource type="BoxShape" id=31]

[sub_resource type="CubeMesh" id=30]

[sub_resource type="GDScript" id=33]
script/source = "extends StaticBody

onready var hitbox : Hitbox = $Hitbox

func _on_Hitbox_hit(damage) -> void:
	print(damage)

func _on_Hitbox_failed() -> void:
	print(\"AOOO\")
	queue_free()
"

[sub_resource type="SphereMesh" id=28]
material = ExtResource( 3 )
radius = 2.0
height = 4.0

[sub_resource type="SphereShape" id=29]
radius = 2.0

[sub_resource type="SphereShape" id=32]
radius = 2.14449

[node name="Gun Range" type="Spatial"]
transform = Transform( 1, -9.47311e-16, -7.10543e-15, 0, 1, 2.98023e-08, 0, -2.98023e-08, 1, 0, 0, 0 )

[node name="Range ground" type="StaticBody" parent="."]
transform = Transform( -2.88495e-06, 9.47311e-16, -30, -1.2517e-06, 1, 7.81631e-15, 42, 2.98023e-08, -2.62272e-07, -0.138895, -1.47048, 8.2885 )
collision_layer = 4
collision_mask = 17
__meta__ = {
"_edit_group_": true
}

[node name="CollisionShape" type="CollisionShape" parent="Range ground"]
shape = SubResource( 31 )

[node name="MeshInstance" type="MeshInstance" parent="Range ground"]
mesh = SubResource( 30 )
material/0 = ExtResource( 2 )

[node name="Enemy" type="StaticBody" parent="."]
transform = Transform( -4.37114e-08, 9.47311e-16, -1, -2.98023e-08, 1, 1.3027e-15, 1, 2.98023e-08, -4.37114e-08, -0.138895, 2.34227, -8.2885 )
collision_layer = 32
script = SubResource( 33 )

[node name="MeshInstance" type="MeshInstance" parent="Enemy"]
mesh = SubResource( 28 )
skeleton = NodePath("")
material/0 = null

[node name="CollisionShape" type="CollisionShape" parent="Enemy"]
shape = SubResource( 29 )

[node name="Hitbox" type="Area" parent="Enemy"]
script = ExtResource( 1 )

[node name="CollisionShape2" type="CollisionShape" parent="Enemy/Hitbox"]
shape = SubResource( 32 )

[node name="Player" parent="." instance=ExtResource( 4 )]
transform = Transform( 1, 8.83524e-29, 0, 0, 1, 0, 0, 0, 1, -0.352167, 5.56832, 29.0741 )

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource( 5 )

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( -0.729073, -0.605628, 0.318851, 0.511611, -0.172771, 0.841668, -0.45465, 0.776765, 0.435809, 0, 0, 0 )
shadow_enabled = true

[node name="Pickup" parent="." instance=ExtResource( 6 )]
transform = Transform( 1, 8.83524e-29, 0, 0, 1, 0, 0, 0, 1, 8.83396, 4.02222, 4.84423 )

[connection signal="hit" from="Enemy/Hitbox" to="Enemy" method="_on_Hitbox_hit"]
[connection signal="killed" from="Enemy/Hitbox" to="Enemy" method="_on_Hitbox_failed"]
